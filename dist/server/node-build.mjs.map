{"version":3,"file":"node-build.mjs","sources":["../../server/routes/demo.ts","../../server/routes/dataEx.ts","../../server/index.ts","../../server/node-build.ts"],"sourcesContent":["import { RequestHandler } from \"express\";\nimport { DemoResponse } from \"@shared/api\";\n\nexport const handleDemo: RequestHandler = (req, res) => {\n  const response: DemoResponse = {\n    message: \"Hello from Express server\",\n  };\n  res.status(200).json(response);\n};\n","import express from 'express';\nimport fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst router = express.Router();\n\n// Get directory of this file for reliable path resolution\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Data directory - works both in dev and production\nconst DATA_DIR = path.resolve(__dirname, '../data');\n\n// Helper to read JSON\nconst readJson = (file: string) => {\n  const filePath = path.join(DATA_DIR, file);\n  if (!fs.existsSync(filePath)) return null;\n  const data = fs.readFileSync(filePath, 'utf-8');\n  return JSON.parse(data);\n};\n\n// Helper to write JSON\nconst writeJson = (file: string, data: any) => {\n  const filePath = path.join(DATA_DIR, file);\n  if (!fs.existsSync(DATA_DIR)) {\n    fs.mkdirSync(DATA_DIR, { recursive: true });\n  }\n  fs.writeFileSync(filePath, JSON.stringify(data, null, 2));\n};\n\n// ============ AUTH ============\nrouter.post('/auth/login', (req, res) => {\n  try {\n    const { phone, password, role } = req.body;\n    const users = readJson('users.json') || [];\n\n    const user = users.find((u: any) =>\n      u.phone === phone && u.password === password && u.role === role\n    );\n\n    if (user) {\n      res.json({\n        success: true,\n        user: { id: user.id, name: user.name, role: user.role, flatId: user.flatId }\n      });\n    } else {\n      res.status(401).json({ success: false, error: 'Invalid credentials' });\n    }\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ APARTMENTS ============\nrouter.get('/apartments', (req, res) => {\n  try {\n    const apartments = readJson('apartments.json') || [];\n    res.json(apartments);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/apartments', (req, res) => {\n  try {\n    writeJson('apartments.json', req.body);\n    res.json({ success: true });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.patch('/apartments/:id', (req, res) => {\n  try {\n    const apartments = readJson('apartments.json') || [];\n    const id = parseInt(req.params.id);\n    const index = apartments.findIndex((a: any) => a.id === id);\n\n    if (index !== -1) {\n      apartments[index] = { ...apartments[index], ...req.body };\n      writeJson('apartments.json', apartments);\n      res.json({ success: true, apartment: apartments[index] });\n    } else {\n      res.status(404).json({ error: 'Apartment not found' });\n    }\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ TRANSACTIONS ============\nrouter.get('/transactions', (req, res) => {\n  try {\n    const transactions = readJson('transactions.json') || [];\n    res.json(transactions);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/transactions', (req, res) => {\n  try {\n    const transactions = readJson('transactions.json') || [];\n    const newTransaction = { ...req.body, id: req.body.id || `TX-${Date.now()}` };\n    transactions.push(newTransaction);\n    writeJson('transactions.json', transactions);\n    res.json({ success: true, transaction: newTransaction });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.put('/transactions', (req, res) => {\n  try {\n    writeJson('transactions.json', req.body);\n    res.json({ success: true });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ NOTIFICATIONS ============\nrouter.get('/notifications', (req, res) => {\n  try {\n    const notifications = readJson('notifications.json') || [];\n    const { flatId } = req.query;\n\n    if (flatId) {\n      const filtered = notifications.filter((n: any) =>\n        n.sendToAll || n.flatId === parseInt(flatId as string)\n      );\n      res.json(filtered);\n    } else {\n      res.json(notifications);\n    }\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/notifications', (req, res) => {\n  try {\n    const notifications = readJson('notifications.json') || [];\n    const newNotification = {\n      ...req.body,\n      id: `N-${Date.now()}`,\n      createdAt: new Date().toISOString(),\n      read: false\n    };\n    notifications.unshift(newNotification);\n    writeJson('notifications.json', notifications);\n    res.json({ success: true, notification: newNotification });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.patch('/notifications/:id', (req, res) => {\n  try {\n    const notifications = readJson('notifications.json') || [];\n    const index = notifications.findIndex((n: any) => n.id === req.params.id);\n\n    if (index !== -1) {\n      notifications[index] = { ...notifications[index], ...req.body };\n      writeJson('notifications.json', notifications);\n      res.json({ success: true });\n    } else {\n      res.status(404).json({ error: 'Notification not found' });\n    }\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.delete('/notifications/:id', (req, res) => {\n  try {\n    let notifications = readJson('notifications.json') || [];\n    notifications = notifications.filter((n: any) => n.id !== req.params.id);\n    writeJson('notifications.json', notifications);\n    res.json({ success: true });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ CHAT MESSAGES ============\nrouter.get('/messages', (req, res) => {\n  try {\n    const messages = readJson('messages.json') || [];\n    res.json(messages);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/messages', (req, res) => {\n  try {\n    const messages = readJson('messages.json') || [];\n    const newMessage = {\n      ...req.body,\n      id: `M-${Date.now()}`,\n      timestamp: new Date().toISOString()\n    };\n    messages.push(newMessage);\n    writeJson('messages.json', messages);\n    res.json({ success: true, message: newMessage });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ BUDGET ============\nrouter.get('/budget', (req, res) => {\n  try {\n    const budget = readJson('budget.json') || { items: [], monthlyCollections: [] };\n    res.json(budget);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/budget', (req, res) => {\n  try {\n    writeJson('budget.json', req.body);\n    res.json({ success: true });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ PAYMENTS ============\nrouter.get('/payments', (req, res) => {\n  try {\n    const payments = readJson('payments.json') || [];\n    const { flatId } = req.query;\n\n    if (flatId) {\n      const filtered = payments.filter((p: any) => p.flatId === parseInt(flatId as string));\n      res.json(filtered);\n    } else {\n      res.json(payments);\n    }\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/payments', (req, res) => {\n  try {\n    const payments = readJson('payments.json') || [];\n    const newPayment = {\n      ...req.body,\n      id: `P-${Date.now()}`,\n      createdAt: new Date().toISOString()\n    };\n    payments.push(newPayment);\n    writeJson('payments.json', payments);\n    res.json({ success: true, payment: newPayment });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ TENANTS ============\nrouter.get('/tenants', (req, res) => {\n  try {\n    const tenants = readJson('tenants.json') || [];\n    const { flatId } = req.query;\n\n    if (flatId) {\n      const filtered = tenants.filter((t: any) => t.flatId === parseInt(flatId as string));\n      res.json(filtered);\n    } else {\n      res.json(tenants);\n    }\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/tenants', (req, res) => {\n  try {\n    const tenants = readJson('tenants.json') || [];\n    const newTenant = {\n      ...req.body,\n      id: `T-${Date.now()}`,\n      isActive: true\n    };\n    tenants.push(newTenant);\n    writeJson('tenants.json', tenants);\n    res.json({ success: true, tenant: newTenant });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.patch('/tenants/:id', (req, res) => {\n  try {\n    const tenants = readJson('tenants.json') || [];\n    const index = tenants.findIndex((t: any) => t.id === req.params.id);\n\n    if (index !== -1) {\n      tenants[index] = { ...tenants[index], ...req.body };\n      writeJson('tenants.json', tenants);\n      res.json({ success: true, tenant: tenants[index] });\n    } else {\n      res.status(404).json({ error: 'Tenant not found' });\n    }\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.delete('/tenants/:id', (req, res) => {\n  try {\n    let tenants = readJson('tenants.json') || [];\n    tenants = tenants.filter((t: any) => t.id !== req.params.id);\n    writeJson('tenants.json', tenants);\n    res.json({ success: true });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ MAINTENANCE REQUESTS ============\nrouter.get('/maintenance', (req, res) => {\n  try {\n    const maintenance = readJson('maintenance.json') || [];\n    res.json(maintenance);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/maintenance', (req, res) => {\n  try {\n    const maintenance = readJson('maintenance.json') || [];\n    const newRequest = {\n      ...req.body,\n      id: `MR-${Date.now()}`,\n      status: 'pending',\n      createdAt: new Date().toISOString()\n    };\n    maintenance.push(newRequest);\n    writeJson('maintenance.json', maintenance);\n    res.json({ success: true, request: newRequest });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.patch('/maintenance/:id', (req, res) => {\n  try {\n    const maintenance = readJson('maintenance.json') || [];\n    const index = maintenance.findIndex((m: any) => m.id === req.params.id);\n\n    if (index !== -1) {\n      maintenance[index] = { ...maintenance[index], ...req.body };\n      writeJson('maintenance.json', maintenance);\n      res.json({ success: true });\n    } else {\n      res.status(404).json({ error: 'Request not found' });\n    }\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ SETTINGS ============\nrouter.get('/settings', (req, res) => {\n  try {\n    const settings = readJson('settings.json') || {};\n    res.json(settings);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/settings', (req, res) => {\n  try {\n    const settings = readJson('settings.json') || {};\n    const updated = { ...settings, ...req.body };\n    writeJson('settings.json', updated);\n    res.json({ success: true, settings: updated });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// ============ BOOTSTRAP ALL DATA ============\nrouter.get('/data', (req, res) => {\n  try {\n    res.json({\n      apartments: readJson('apartments.json') || [],\n      transactions: readJson('transactions.json') || [],\n      notifications: readJson('notifications.json') || [],\n      messages: readJson('messages.json') || [],\n      budget: readJson('budget.json') || { items: [], monthlyCollections: [] },\n      payments: readJson('payments.json') || [],\n      tenants: readJson('tenants.json') || [],\n      maintenance: readJson('maintenance.json') || [],\n      settings: readJson('settings.json') || {}\n    });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\n// Legacy endpoints\nrouter.post('/save-transactions', (req, res) => {\n  try {\n    writeJson('transactions.json', req.body);\n    res.json({ success: true });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nrouter.post('/save-apartments', (req, res) => {\n  try {\n    writeJson('apartments.json', req.body);\n    res.json({ success: true });\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n});\n\nexport { router as dataExRouter };\n","import \"dotenv/config\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport { handleDemo } from \"./routes/demo\";\nimport { dataExRouter } from \"./routes/dataEx\";\n\nexport function createServer() {\n  const app = express();\n\n  // Middleware\n  app.use(cors());\n  app.use(express.json());\n  app.use(express.urlencoded({ extended: true }));\n\n  // API Routes\n  app.use('/api', dataExRouter);\n\n  // Example API routes\n  app.get(\"/api/ping\", (_req, res) => {\n    const ping = process.env.PING_MESSAGE ?? \"ping\";\n    res.json({ message: ping });\n  });\n\n  app.get(\"/api/demo\", handleDemo);\n\n  return app;\n}\n","import path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport { createServer } from \"./index\";\nimport * as express from \"express\";\n\nconst app = createServer();\nconst port = process.env.PORT || 3000;\n\n// In production, serve the built SPA files (Node 16 compatible)\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst distPath = path.join(__dirname, \"../spa\");\n\n// Serve static files with correct MIME types\napp.use(express.static(distPath, {\n  setHeaders: (res, filePath) => {\n    if (filePath.endsWith('.js') || filePath.endsWith('.mjs')) {\n      res.setHeader('Content-Type', 'application/javascript');\n    } else if (filePath.endsWith('.css')) {\n      res.setHeader('Content-Type', 'text/css');\n    } else if (filePath.endsWith('.json')) {\n      res.setHeader('Content-Type', 'application/json');\n    } else if (filePath.endsWith('.webmanifest')) {\n      res.setHeader('Content-Type', 'application/manifest+json');\n    }\n  }\n}));\n\n// Handle React Router - serve index.html for all non-API routes\napp.get(\"*\", (req, res) => {\n  // Don't serve index.html for API routes\n  if (req.path.startsWith(\"/api/\") || req.path.startsWith(\"/health\")) {\n    return res.status(404).json({ error: \"API endpoint not found\" });\n  }\n\n  res.sendFile(path.join(distPath, \"index.html\"));\n});\n\napp.listen(port, () => {\n  console.log(`Server running on port ${port}`);\n  console.log(`Frontend: http://localhost:${port}`);\n  console.log(`API: http://localhost:${port}/api`);\n});\n\n// Graceful shutdown\nprocess.on(\"SIGTERM\", () => {\n  console.log(\"Received SIGTERM, shutting down gracefully\");\n  process.exit(0);\n});\n\nprocess.on(\"SIGINT\", () => {\n  console.log(\"Received SIGINT, shutting down gracefully\");\n  process.exit(0);\n});\n"],"names":["express","__filename","__dirname","app","dataExRouter"],"mappings":"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"}